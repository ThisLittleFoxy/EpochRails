# üéØ –°–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –ø–æ–µ–∑–¥–∞

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è: "–õ–æ–∫–∞–ª—å–Ω—ã–π –º–∏—Ä –ø–æ–µ–∑–¥–∞"

### –ò–¥–µ—è

–ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ –ø–æ–µ–∑–¥–µ –¥—É–º–∞–µ—Ç, —á—Ç–æ **–ø–æ–µ–∑–¥ —Å—Ç–æ–∏—Ç**, –∞ –º–∏—Ä –¥–≤–∏–∂–µ—Ç—Å—è –º–∏–º–æ –Ω–µ–≥–æ. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **"—Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å—á—ë—Ç–∞"** –∏–ª–∏ **"relative reference frame"**.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ú–∏—Ä–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (World Space)         ‚îÇ
‚îÇ  ‚îú‚îÄ –ü–æ–µ–∑–¥ –¥–≤–∏–∂–µ—Ç—Å—è —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é V               ‚îÇ
‚îÇ  ‚îî‚îÄ –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ–µ–∑–¥–∞:         ‚îÇ
‚îÇ      ‚îú‚îÄ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–µ–∑–¥–∞ –≤—Å—ë —Å—Ç–æ–∏—Ç           ‚îÇ
‚îÇ      ‚îî‚îÄ –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ö–æ–¥–∏—Ç/–ø—Ä—ã–≥–∞–µ—Ç "–Ω–∞ –º–µ—Å—Ç–µ"       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **Base Velocity Inheritance** (–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –±–∞–∑—ã)

**–í `OnBoardingZoneBeginOverlap`:**

```cpp
MovementComp->bImpartBaseVelocityX = true;
MovementComp->bImpartBaseVelocityY = true;
MovementComp->bImpartBaseVelocityZ = true;
MovementComp->bImpartBaseAngularVelocity = true;
```

**–ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü–µ—Ä—Å–æ–Ω–∞–∂ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å** –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–ø–æ–µ–∑–¥–∞)
- –ü—Ä–∏ –ø—Ä—ã–∂–∫–µ –æ–Ω **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–µ–∑–¥–∞**
- –ü—Ä—ã–∂–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–µ–∑–¥–∞**, –∞ –Ω–µ –º–∏—Ä–∞

**–ü—Ä–∏–º–µ—Ä:**
```
–ü–æ–µ–∑–¥ –µ–¥–µ—Ç: 100 –∫–º/—á ‚Üí

–ü–µ—Ä—Å–æ–Ω–∞–∂ –ø—Ä—ã–≥–∞–µ—Ç ‚Üë
‚îÇ
‚îÇ  –ë–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:              –° –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º:
‚îÇ  Velocity = (0, 0, 500)         Velocity = (TrainSpeed, 0, 500)
‚îÇ  –†–µ–∑—É–ª—å—Ç–∞—Ç: –æ—Ç—Å—Ç–∞—ë—Ç –æ—Ç –ø–æ–µ–∑–¥–∞  –†–µ–∑—É–ª—å—Ç–∞—Ç: –ª–µ—Ç–∏—Ç –≤–º–µ—Å—Ç–µ —Å –ø–æ–µ–∑–¥–æ–º
‚îÇ             –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç!                     –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π!
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
```

---

### 2. **UpdatePassengersPhysics()** - –ê–∫—Ç–∏–≤–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏

**–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä –≤ `Tick()`:**

```cpp
void ARailsTrain::UpdatePassengersPhysics(float DeltaTime) {
  for (ACharacter* Passenger : PassengersOnBoard) {
    UCharacterMovementComponent* MovementComp = Passenger->GetCharacterMovement();
    
    if (MovementComp->IsFalling()) {  // –ü–µ—Ä—Å–æ–Ω–∞–∂ –≤ –≤–æ–∑–¥—É—Ö–µ (–ø—Ä—ã–∂–æ–∫)
      // –í—ã—á–∏—Å–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–µ–∑–¥–∞
      FVector TrainVelocity = GetVelocity();
      
      // –†–∞–∑–¥–µ–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞:
      // 1. –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–µ–∑–¥–∞ (–±–∞–∑–æ–≤–∞—è)
      // 2. –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–µ–≥–æ –¥–≤–∏–∂–µ–Ω–∏–µ)
      FVector RelativeVelocity = MovementComp->Velocity - TrainVelocity;
      
      // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º: –±–∞–∑–∞ + –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è
      MovementComp->Velocity = TrainVelocity + RelativeVelocity;
    }
  }
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
- –ï—Å–ª–∏ –≤ `Falling` (–ø—Ä—ã–∂–æ–∫) ‚Üí –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ** –¥–∞–∂–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–µ–∑–¥–∞

**–í–∞–∂–Ω–æ:** –≠—Ç–æ –Ω—É–∂–Ω–æ, –µ—Å–ª–∏ –ø–æ–µ–∑–¥ **—É—Å–∫–æ—Ä—è–µ—Ç—Å—è/—Ç–æ—Ä–º–æ–∑–∏—Ç** –≤–æ –≤—Ä–µ–º—è –ø—Ä—ã–∂–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.

---

### 3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ Attachment Rules**

```cpp
FAttachmentTransformRules AttachRules(
    EAttachmentRule::KeepWorld,   // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∏—Ä–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –≤—Ö–æ–¥–µ
    EAttachmentRule::KeepWorld,   // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∏—Ä–æ–≤—É—é —Ä–æ—Ç–∞—Ü–∏—é –ø—Ä–∏ –≤—Ö–æ–¥–µ
    EAttachmentRule::KeepWorld,   // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∏—Ä–æ–≤–æ–π –º–∞—Å—à—Ç–∞–±
    false                         // –ù–ï weld - —Ä–∞–∑—Ä–µ—à–∞–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é —Ñ–∏–∑–∏–∫—É
);
```

**–ü–æ—á–µ–º—É `KeepWorld`?**
- –ü—Ä–∏ **–≤—Ö–æ–¥–µ** –Ω–∞ –ø–æ–µ–∑–¥ –ø–µ—Ä—Å–æ–Ω–∞–∂ –ø–ª–∞–≤–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ–µ–∑–¥–∞
- –ù–µ—Ç —Ä–µ–∑–∫–∏—Ö —Ç–µ–ª–µ–ø–æ—Ä—Ç–æ–≤
- –í–∏–∑—É–∞–ª—å–Ω–æ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –¥–ª—è –∏–≥—Ä–æ–∫–∞

**–ü–æ—á–µ–º—É `bWeld = false`?**
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂—É **–¥–≤–∏–≥–∞—Ç—å—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ** –ø–æ–µ–∑–¥–∞
- –ï—Å–ª–∏ `true` ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ "–ø—Ä–∏–≤–∞—Ä–µ–Ω", –Ω–µ –º–æ–∂–µ—Ç —Ö–æ–¥–∏—Ç—å

---

### 4. **Movement Component Settings**

```cpp
MovementComp->bIgnoreBaseRotation = false;      // –°–ª–µ–¥—É–µ–º –∑–∞ –≤—Ä–∞—â–µ–Ω–∏–µ–º –ø–æ–µ–∑–¥–∞
MovementComp->bAlwaysCheckFloor = true;         // –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª –ø–æ–¥ –Ω–æ–≥–∞–º–∏
MovementComp->bUseFlatBaseForFloorChecks = true;// –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–ª–æ—Å–∫–æ–π
MovementComp->bEnablePhysicsInteraction = false;// –ù–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ–º —Å –≤–Ω–µ—à–Ω–µ–π —Ñ–∏–∑–∏–∫–æ–π
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ü–µ—Ä—Å–æ–Ω–∞–∂ "—á—É–≤—Å—Ç–≤—É–µ—Ç" —Ç–æ–ª—å–∫–æ **–ª–æ–∫–∞–ª—å–Ω—ã–π –º–∏—Ä –ø–æ–µ–∑–¥–∞**
- –í–Ω–µ—à–Ω–∏–π –º–∏—Ä (–¥–µ—Ä–µ–≤—å—è, –∑–¥–∞–Ω–∏—è) –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –µ–≥–æ —Ñ–∏–∑–∏–∫—É –Ω–∞ –ø–æ–µ–∑–¥–µ
- –≠—Ç–æ –∏ –µ—Å—Ç—å **"—Å–≤–æ–π –º–∏—Ä –≤–Ω—É—Ç—Ä–∏ –ø–æ–µ–∑–¥–∞"**

---

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–µ—Ä—Å–æ–Ω–∞–∂ –ø—Ä—ã–≥–∞–µ—Ç –Ω–∞ –¥–≤–∏–∂—É—â–µ–º—Å—è –ø–æ–µ–∑–¥–µ

**–®–∞–≥ 1: –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ** (—Å—Ç–æ–∏—Ç –∏–ª–∏ –∏–¥—ë—Ç)
```
–ü–æ–µ–∑–¥: V = 100 –∫–º/—á ‚Üí
–ü–µ—Ä—Å–æ–Ω–∞–∂: V_relative = 0 (—Å—Ç–æ–∏—Ç)
–ü–µ—Ä—Å–æ–Ω–∞–∂: V_world = 100 –∫–º/—á ‚Üí (–Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç –ø–æ–µ–∑–¥–∞)
```

**–®–∞–≥ 2: –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞–∂–∏–º–∞–µ—Ç Space (–ø—Ä—ã–∂–æ–∫)**
```
CharacterMovementComponent:
  - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º Falling
  - –ü—Ä–∏–º–µ–Ω—è–µ—Ç JumpZVelocity = 500 cm/s ‚Üë
  - bImpartBaseVelocityX = true ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç TrainVelocity

–†–µ–∑—É–ª—å—Ç–∞—Ç:
  V_world = (100 –∫–º/—á ‚Üí, 0, 500 ‚Üë)
```

**–®–∞–≥ 3: –í –≤–æ–∑–¥—É—Ö–µ (–∫–∞–∂–¥—ã–π –∫–∞–¥—Ä)**
```
UpdatePassengersPhysics():
  1. –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
  2. –í—ã—á–∏—Ç–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–µ–∑–¥–∞ ‚Üí –ø–æ–ª—É—á–∞–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é
  3. –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–µ–∑–¥–∞ –Ω–∞–∑–∞–¥
  
–≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç:
  - –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–µ–∑–¥–∞ (—É—Å–∫–æ—Ä–µ–Ω–∏–µ/—Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ)
  - –ü–æ–≤–æ—Ä–æ—Ç–æ–≤ –ø–æ–µ–∑–¥–∞
  - Drift'–∞ –∏–∑-–∑–∞ —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
```

**–®–∞–≥ 4: –ü—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ**
```
CharacterMovementComponent:
  - –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø–æ–ª (PlatformMesh)
  - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ MOVE_Walking
  - –ü—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è –∫ –±–∞–∑–µ (–ø–æ–µ–∑–¥—É)
  - –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å
```

---

## üéì –§–∏–∑–∏–∫–∞: –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–∏–Ω—Ü–∏–ø –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ì–∞–ª–∏–ª–µ—è

> "–ó–∞–∫–æ–Ω—ã —Ñ–∏–∑–∏–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã –≤–æ –≤—Å–µ—Ö –∏–Ω–µ—Ä—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –æ—Ç—Å—á—ë—Ç–∞"

**–î–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–∞ –ø–æ–µ–∑–¥–∞:**
- –ü–æ–µ–∑–¥ = –∏–Ω–µ—Ä—Ü–∏–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å—á—ë—Ç–∞
- –í —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ –ø–æ–µ–∑–¥ **—Å—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ**
- –ü—Ä—ã–∂–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ –Ω–∞ –∑–µ–º–ª–µ

**–î–ª—è –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è —Å–Ω–∞—Ä—É–∂–∏:**
- –ó–µ–º–ª—è = –∏–Ω–µ—Ä—Ü–∏–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å—á—ë—Ç–∞
- –ü–æ–µ–∑–¥ –¥–≤–∏–∂–µ—Ç—Å—è —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é V
- –ü–∞—Å—Å–∞–∂–∏—Ä –ø—Ä—ã–≥–∞–µ—Ç —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é V

**–û–±–µ —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã!** –ú—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –ø–µ—Ä–≤—É—é (—É–¥–æ–±–Ω–µ–µ –¥–ª—è –≥–µ–π–º–ø–ª–µ—è).

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (–±–µ–∑ relative space)

```cpp
// –ü—Ä–æ—Å—Ç–æ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
Character->AttachToComponent(Platform);

// –ü—Ä–æ–±–ª–µ–º–∞:
// - –ü—Ä–∏ –ø—Ä—ã–∂–∫–µ –ø–µ—Ä—Å–æ–Ω–∞–∂ –æ—Ç—Ä—ã–≤–∞–µ—Ç—Å—è
// - –¢–µ—Ä—è–µ—Ç —Å–≤—è–∑—å —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é –ø–æ–µ–∑–¥–∞
// - –ü–æ–ª—É—á–∞–µ—Ç "—Ä—ã–≤–æ–∫" –Ω–∞–∑–∞–¥ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–µ–∑–¥–∞)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—ã–∫–∏–¥—ã–≤–∞–µ—Ç —Å –ø–æ–µ–∑–¥–∞ ‚ùå

### ‚úÖ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (relative space physics)

```cpp
// –ü—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º + –≤–∫–ª—é—á–∞–µ–º base velocity inheritance
Character->AttachToComponent(Platform);
MovementComp->bImpartBaseVelocityX = true; // –∏ Y, Z

// + –∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –≤ Tick
UpdatePassengersPhysics(DeltaTime);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–µ—Ä—Å–æ–Ω–∞–∂ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –º–∏—Ä–µ –ø–æ–µ–∑–¥–∞ ‚úÖ

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Blueprint

### –í BP_RailsTrain —É–∂–µ –≥–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ BP_RailsTrain Components ‚Üí PlatformMesh –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:

```
Collision:
  Collision Preset: BlockAll
  Can Character Step Up: Yes

Physics:
  Simulate Physics: OFF
  Enable Gravity: OFF
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ BP_Character (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```
Character Movement:
  Can Walk Off Ledges: false  (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ)
  Enable Physics Interaction: false  (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –≤–Ω–µ—à–Ω–∏–µ –æ–±—ä–µ–∫—Ç—ã)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°—Ç–æ—è –Ω–∞ –º–µ—Å—Ç–µ
```
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ –ø–æ–µ–∑–¥
2. –ü–æ–µ–∑–¥ —Å—Ç–æ–∏—Ç
3. –ü—Ä—ã–≥–Ω–∏—Ç–µ

–û–∂–∏–¥–∞–Ω–∏–µ: –ü—Ä–∏–∑–µ–º–ª—è–µ—Ç–µ—Å—å –Ω–∞ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

### –¢–µ—Å—Ç 2: –ù–∞ –¥–≤–∏–∂—É—â–µ–º—Å—è –ø–æ–µ–∑–¥–µ
```
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ –ø–æ–µ–∑–¥
2. –ü–æ–µ–∑–¥ –µ–¥–µ—Ç (50+ –∫–º/—á)
3. –ü—Ä—ã–≥–Ω–∏—Ç–µ

–û–∂–∏–¥–∞–Ω–∏–µ: –ü—Ä–∏–∑–µ–º–ª—è–µ—Ç–µ—Å—å –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–µ–∑–¥–∞
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π!
```

### –¢–µ—Å—Ç 3: –ü—Ä–∏ —É—Å–∫–æ—Ä–µ–Ω–∏–∏
```
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ –ø–æ–µ–∑–¥
2. –î–∞–π—Ç–µ –ø–æ–ª–Ω—ã–π throttle
3. –í–æ –≤—Ä–µ–º—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä—ã–≥–Ω–∏—Ç–µ

–û–∂–∏–¥–∞–Ω–∏–µ: –ù–µ–±–æ–ª—å—à–æ–π —Å–¥–≤–∏–≥ –Ω–∞–∑–∞–¥ (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ), –Ω–æ –Ω–µ –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ UpdatePassengersPhysics() –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç
```

### –¢–µ—Å—Ç 4: –•–æ–¥—å–±–∞ –∏ –ø—Ä—ã–∂–∫–∏
```
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ –ø–æ–µ–∑–¥
2. –ü–æ–µ–∑–¥ –µ–¥–µ—Ç
3. –•–æ–¥–∏—Ç–µ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
4. –ü—Ä—ã–≥–∞–π—Ç–µ –≤–æ –≤—Ä–µ–º—è —Ö–æ–¥—å–±—ã

–û–∂–∏–¥–∞–Ω–∏–µ: –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –∫–∞–∫ –Ω–∞ –∑–µ–º–ª–µ
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–∑–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞

### –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ –º–∏—Ä–µ:

```math
V_world = V_train + V_relative

–≥–¥–µ:
  V_train = —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–µ–∑–¥–∞ –≤ –º–∏—Ä–µ
  V_relative = —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–µ–∑–¥–∞
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞:

1. **–ü—Ä–∏ –≤—Ö–æ–¥–µ –Ω–∞ –ø–æ–µ–∑–¥:**
   - –í–∫–ª—é—á–∞–µ—Ç `bImpartBaseVelocity*` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `V_train`

2. **–ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –ø–æ–µ–∑–¥—É:**
   - –ü–µ—Ä—Å–æ–Ω–∞–∂ –∏–∑–º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ `V_relative`
   - `V_train` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ü—Ä–∏ –ø—Ä—ã–∂–∫–µ:**
   - `V_relative` –ø–æ–ª—É—á–∞–µ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é —Å–æ—Å—Ç–∞–≤–ª—è—é—â—É—é
   - `V_train` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `UpdatePassengersPhysics()`

4. **–ü—Ä–∏ –≤—ã—Ö–æ–¥–µ:**
   - –û—Ç–∫–ª—é—á–∞–µ—Ç `bImpartBaseVelocity*`
   - –¢–µ–∫—É—â–∞—è `V_world` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (–∏–Ω–µ—Ä—Ü–∏—è)

---

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ –î–ª—è –≥–µ–π–º–ø–ª–µ—è:
- **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ:** –ò–≥—Ä–æ–∫ –Ω–µ –∑–∞–¥—É–º—ã–≤–∞–µ—Ç—Å—è –æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–µ–∑–¥–∞
- **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ:** –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞ –∑–µ–º–ª–µ
- **–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:** –ú–æ–∂–Ω–æ –ø—Ä—ã–≥–∞—Ç—å, —Å—Ç—Ä–µ–ª—è—Ç—å, –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ

### ‚úÖ –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:** –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å—é —Ñ–∏–∑–∏–∫—É
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** Unreal Engine –¥–µ–ª–∞–µ—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ:** –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤

### ‚úÖ –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ:** –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ—Ä–∞–±–ª–µ–π, —Å–∞–º–æ–ª—ë—Ç–æ–≤, –ª–∏—Ñ—Ç–æ–≤
- **–ú–æ–¥—É–ª—å–Ω–æ:** –ù–µ –º–µ–Ω—è–µ—Ç Character class
- **–û—Ç–ª–∞–¥–∫–∞:** –õ–µ–≥–∫–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üöß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
```
–ü–æ–µ–∑–¥ ‚Üí –í–∞–≥–æ–Ω –Ω–∞ –ø–æ–µ–∑–¥–µ ‚Üí –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ –≤–∞–≥–æ–Ω–µ
                 ?
–ù–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
```

### 2. –û—á–µ–Ω—å —Ä–µ–∑–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
```
–ï—Å–ª–∏ –ø–æ–µ–∑–¥ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –º–µ–Ω—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å (—Ç–µ–ª–µ–ø–æ—Ä—Ç):
  ‚Üí UpdatePassengersPhysics() –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å
  ‚Üí –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–ª–∞–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —É–∂–µ –µ—Å—Ç—å)
```

### 3. –§–∏–∑–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –Ω–∞ –ø–æ–µ–∑–¥–µ
```
–ï—Å–ª–∏ –±—Ä–æ—Å–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É:
  ‚Üí –ú–æ–∂–µ—Ç —Å–∫–∞—Ç–∏—Ç—å—Å—è (–Ω–µ—Ç friction —Å –¥–≤–∏–∂—É—â–µ–π—Å—è –±–∞–∑–æ–π)
  ‚Üí –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å PhysicsConstraint –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ñ–∏–∑–∏–∫—É
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –¢–µ—Ä–º–∏–Ω—ã:
- **Reference Frame** (—Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å—á—ë—Ç–∞) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è
- **Inertial Frame** (–∏–Ω–µ—Ä—Ü–∏–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞) - —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ —É—Å–∫–æ—Ä–µ–Ω–∏—è
- **Base Velocity** (–±–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å) - —Å–∫–æ—Ä–æ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **Relative Velocity** (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å) - —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ

### –°—Å—ã–ª–∫–∏:
- [Unreal CharacterMovementComponent](https://dev.epicgames.com/documentation/en-us/unreal-engine/API/Runtime/Engine/UCharacterMovementComponent)
- [Physics Galilean Relativity](https://en.wikipedia.org/wiki/Galilean_invariance)

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ú—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ "–ª–æ–∫–∞–ª—å–Ω—ã–π –º–∏—Ä –ø–æ–µ–∑–¥–∞"**, –≥–¥–µ:

‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–∂ **–¥—É–º–∞–µ—Ç**, —á—Ç–æ –ø–æ–µ–∑–¥ —Å—Ç–æ–∏—Ç  
‚úÖ –§–∏–∑–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç **–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–µ–∑–¥–∞**  
‚úÖ –ü—Ä—ã–∂–∫–∏ **–Ω–µ –≤—ã–∫–∏–¥—ã–≤–∞—é—Ç** —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã  
‚úÖ –í—Å—ë **–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ** –¥–ª—è –∏–≥—Ä–æ–∫–∞  
‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ** —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ñ–∏–∑–∏–∫–∏  

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞!** üöÇ‚ú®
